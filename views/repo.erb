<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>MyHub</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="stylesheet" href="/style.css">
  </head>
  <body>
    <header><h2><%= @owner_and_repo %></h2></header>
    <div id="branches-holder" role="main">
    </div>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
  <script src="//raw.github.com/janl/mustache.js/817e884f60c0600b78ffb16c423513bd9dcde394/mustache.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.1.7/underscore-min.js"></script>
  <script src="/repo.js"></script>
  </body>
  <script>
  var user = { token: '<%= user_token %>' };
  var repo = '<%= @owner_and_repo %>';

  $(function(){
    var view = new RepoView(user, repo, '#branches-holder');
    view.loadBranches();
  });
  </script>

  <script type="text/template" id="view-branch-list">
    <h3>Branches</h3>
    <ul class="branch-list">
      {{#branches}}
      <li data-url="{{url}}"><span>{{ref}}</span> <span class="status"></span></li>
      {{/branches}}
    </ul>
  </script>
</html>
